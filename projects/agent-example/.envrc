use nix

require_pass() {
  if ! pass "$1" >/dev/null 2>&1; then
    echo "Missing secret: $1"
    return 1
  fi
}

export_secret() {
  local path="$1"
  local var="$2"
  export "$var=$(pass "$path")"
}

require_pass dev/agent-example/local/claude-api-key
require_pass dev/agent-example/local/claude-base-url

export_secret dev/agent-example/local/claude-api-key ANTHROPIC_AUTH_TOKEN

export_secret dev/agent-example/local/claude-base-url ANTHROPIC_BASE_URL
